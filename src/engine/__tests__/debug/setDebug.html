<html>
  <head>
    <script src="/base/src/__tests__/helpers/testpage.js"></script>
    <script src="/base/dist/container.js"></script>
    <script src="/base/dist/engine.js"></script>
    <script>
      TestPage
        .execute(function() {
          if (window.console) {
            spyOn(window.console, 'log');
          }

          expect(window.localStorage.getItem('sdsat_debug')).toBeNull();

          _satellite.setDebug(true);
          _satellite.notify('debug setting true');

          if (window.console) {
            expect(window.console.log).toHaveBeenCalledWith('SATELLITE: debug setting true');
          }

          expect(window.localStorage.getItem('sdsat_debug')).toBe('true');

          _satellite.setDebug(false);
          _satellite.notify('debug setting false');

          if (window.console) {
            expect(window.console.log).not.toHaveBeenCalledWith('SATELLITE: debug setting false');
          }

          expect(window.localStorage.getItem('sdsat_debug')).toBe('false');
        })
        .start();
    </script>
  </head>
  <body>
    <script>
      _satellite.pageBottom();
    </script>
  </body>
</html>
