<html>
  <head>
    <script>
      var actionSpy = jasmine.createSpy();
      var _satellite = {
        container: {
          extensions: {
            testExtension: {
              events: {
                testEvent: getTestEventDelegate()
              },
              actions: {
                testAction: function(module) {
                  module.exports = actionSpy;
                }
              }
            }
          },
          rules: [
            {
              events: [
                {
                  type: 'testEvent'
                }
              ],
              actions: [
                {
                  type: 'testAction'
                }
              ]
            }
          ]
        }
      };
    </script>
    <script src="/base/testrunner/engine.js"></script>
  </head>
  <body>
    <script>
      _satellite.pageBottom();

      TestPage
        .execute(function() {
          _satellite.triggerTestEvent();
          expect(actionSpy).toHaveBeenCalled();
        })
        .start();
    </script>
  </body>
</html>
