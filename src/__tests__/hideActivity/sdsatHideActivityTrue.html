<html>
  <head>
    <script>
      window.localStorage.setItem('sdsat_hide_activity', true);

      var actionSpy = jasmine.createSpy();
      var _satellite = {
        container: {
          extensions: {
            EXa: {
              name: 'testExtension',
              displayName: 'Test Extension',
              delegates: {
                'testExtension/events/testEvent': {
                  displayName: 'Test Event',
                  script: getTestEventDelegate()
                },
                'testExtension/actions/testAction': {
                  displayName: 'Test Action',
                  script: function(module) {
                    module.exports = actionSpy;
                  }
                }
              }
            }
          },
          rules: [
            {
              events: [
                {
                  delegateId: 'testExtension/events/testEvent'
                }
              ],
              actions: [
                {
                  delegateId: 'testExtension/actions/testAction'
                }
              ]
            }
          ]
        }
      };
    </script>
    <script src="/base/testrunner/engine.js"></script>
  </head>
  <body>
    <script>
      _satellite.pageBottom();

      TestPage
        .execute(function() {
          _satellite.triggerTestEvent();
          expect(actionSpy).not.toHaveBeenCalled();
        })
        .start();
    </script>
  </body>
</html>
